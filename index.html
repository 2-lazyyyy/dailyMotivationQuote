<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="css/styles.css">
    
    <script src="js/quote.js" defer></script>
</head>
<body>
    <header>
        <div id="header">loading...</div>
        <nav>
            <a href="login.html">Login</a>
            <a href="signup.html">Register</a>
            <a href="../app/dashboard.php">Dashboard</a>
        </nav>
    </header>
    <main>
        <section id="quote">
            <!-- Daily quote will be injected here -->
        </section>
        <button id="prevQuote">Previous Quote</button>
        <button id="nextQuote">Next Quote</button>
        <input type="text" id="searchInput" placeholder="Search quotes...">
        <button id="searchQuote">Search</button>
        <div id="searchResults"></div>
    </main>
    <footer>
        <p>&copy; 2024 Well-being Support</p>
    </footer>

    <script>
        // Fetch username dynamically
        fetch('/api/fetch_username.php')
            .then(response => response.json())
            .then(data => {
                const header = document.getElementById('header');
                if (data.loggedIn) {
                    header.innerHTML = `<h1>Welcome, ${data.username}</h1><button id="logoutButton">Logout</button>`;
                    
                    document.getElementById('logoutButton').addEventListener('click', function() {
                        fetch('/api/logout.php', { method: 'POST' })
                            .then(response => response.text())
                            .then(data => {
                                if (data === 'Logout successful') {
                                    window.location.href = 'index.html';
                                }
                            });
                    });
                } else {
                    
                    header.innerHTML = `<h1>Please Login</h1>`;
                }
            });
    </script>
    
</body>
</html>
